#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include "ssu_time.h"

int main(void) {

	struct timeval begin_t, end_t;
	char *fname = "ssu_test.txt";
	int fd;
	
	gettimeofday(&begin_t, NULL);

	printf("First printf : Hello, OSLAB!!\n");

	if((fd = open(fname, O_RDONLY)) < 0) { //ssu_test.txt를 RDONLY로 오픈한다.
		fprintf(stderr, "open error for %s\n", fname);
		gettimeofday(&end_t, NULL);
		ssu_runtime(&begin_t, &end_t); //프로그램수행시간 측정
		exit(1);
	}

	if(freopen(fname, "w", stdout) != NULL) { //프로그램을 닫고 다시 재오픈한다.
		printf("Second printf : Hello, OSLAB!!\n");
	}


	
	gettimeofday(&end_t, NULL);
	ssu_runtime(&begin_t, &end_t); //프로그램수행시간 측정
	exit(0);

}
